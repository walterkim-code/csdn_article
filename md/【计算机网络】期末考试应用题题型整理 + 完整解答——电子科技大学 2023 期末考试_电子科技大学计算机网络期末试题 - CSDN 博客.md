> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/spicy_chicken123/article/details/131604489?spm=1001.2014.3001.5506)

#### 目录

*   [分组交换延迟计算](#_1)
*   [往返时间的计算](#_100)
*   [域名系统 DNS](#DNS_165)
*   [TCP 传输原理](#TCP_189)
*   [TCP 拥塞控制](#TCP_226)
*   [子网划分](#_282)
*   [链路状态选路算法](#_305)
*   [差错检测技术](#_313)
*   [ARP 协议，交换机](#ARP_324)

分组交换延迟计算
--------

1.  假设将从源主机向目的主机发送 50Mbit 的 MP3 文档。在源和目的主机之间的路径中所有链路的传输速率都是 20Mbps, 传播速率都是 2*10^8m/s。链路上无其他干扰流量存在，且忽略首部等封装用的字节的长度，忽略处理时延。
    
    *   首先假设源和目的端之间单独使用一条距离是 10^7m 的物理链路连接，使用报文交换，该报文包括了完整的该 MP3，计算端到端时延。
    *   假设源和目的端之间单独使用一条距离是 10^7m 的物理链路连接，使用 TDM 方式的将链路划分为若干的电路，每帧划分为 10 个时隙，计算端到端时延。
    *   假设源和目的端之间的路径是由一台路由器连接的 2 条链路所组成，每条链路长度为 5X10^6m，使用报文交换，该报文包括了完整的该 MP3 文档，计算从发送方到接收方端到端时延。
    *   假设源和目的端之间的路径是由一台路由器连接的 2 条链路所组成，每条链路长度为 5X10^6m，使用分组交换，该 MP3 文档分为 5 个分组，每个分组长度为 10Mb, 发送方开始发送到接收方接受到完整的 MP3 文档所花费的时间。
    
    > 1、 首先假设源和目的端之间单独使用一条距离是 10^7m 的物理链路连接，使用报文交换，该报文包括了完整的该 MP3，计算端到端时延。
    > 
    > 解： 传输时延 = L/R= 50Mbit /20Mbps =2.5s
    > 
    > 传播时延 = d/s = 107m/(2*108 m/s) =0.05s
    > 
    > 端到端时延 = 传输时延 + 传播时延 =2.55s
    > 
    > 2、假设源和目的端之间单独使用一条距离是 10^7m 的物理链路连接，使用 TDM 方式的把链路划分为若干电路，每帧划分为 10 个时隙，计算端到端时延。
    > 
    > 每帧划分为 10 个时隙后，**链路带宽降低为原来的十分之一，传输时延增加为原来的十倍**
    > 
    > 解： 传输时延 = L/R= 50Mbit /**2Mbps** =25s
    > 
    > 传播时延 = d/s =107m/(2*108 m/s) =0.05s
    > 
    > 端到端时延 = 传输时延 + 传播时延 =25.05s
    > 
    > 3、假设源和目的端之间的路径是由一台路由器连接的 2 条链路所组成，每条链路长度为 5X10^6m，使用报文交换，该报文包括了完整的该 MP3 文档，计算从发送方到接收方端到端时延。
    > 
    > 解： 发送方到接收方端到端时延 = 源主机到路由器的端到端时延 + 路由器到目的主机的端到端时延
    > 
    > 源主机到路由器的端到端时延：50Mbit /20Mbps+ 5X106m /(2*108 m/s)=2.525s
    > 
    > 路由器到目的主机的端到端时延：50Mbit /20Mbps+ 5X106m /(2*108 m/s)=2.525s
    > 
    > 发送方到接收方端到端时延 = 2.525s + 2.525s = 5.05s
    > 
    > 4、解： 每个分组从源主机推送出去所花费的时间 (传输时延) = L/R=10Mbit /20Mbps =0.5s
    > 
    > 第 5 个分组在第 2 秒开始时被发送
    > 
    > 第 5 个分组从源主机到路由器的端到端时延 =10Mbit /20Mbps+ 5X106m /(2*108 m/s)=0.525s
    > 
    > 第 5 个分组从路由器到目的主机的端到端时延 = 10Mbit /20Mbps+ 5X106m /(2*108 m/s)=0.525s
    > 
    > 接收方接受到完整的 MP3 文档所花费的时间：=2+0.525+0.525=3.05s
    > 
    > **只看最后一个分组**
    
2.  如下图所示，源主机和目的主机之间有 N 段链路，每段链路长度均为 m。链路的传输速率为 R，信号的传播速率为 C。现从源主机向目的主机发送 P 个长度为 L 的分组。试分析并给出所有分组到达目的主机所耗费的总时延（忽略排队时延和处理时延）。
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/0f057eff55345c20b897bccef7f790b2.png)
    
    > 所有分组到达目的主机所耗费总时延，即为最后一个分组到达目的主机时所花费的总时间。设最后一个分组为 X：
    > 
    > （1）在 X 进入链路前，要等待之前的 P-1 个分组进入链路，它们的总传输时延为 (P-1)L/R；
    > 
    > （2）X 进入后，经过 N 段链路到达目的地，每段链路所花费的传输时延均为 L/R，故总共花费 N*L/R 时间；
    > 
    > （3）X 在每段链路上还要经历 m/C 的传播时延，N 段链路共 N*m/C。因此，所有分组到达目的主机所耗费总时延即为上述三项之和：`(P-1)L/R+N*L/R+N*m/C=(P+N-1)L/R+Nm/C`
    
3.  在下图所示的采用 “存储 - 转发” 方式的分组交换网络中， 所有链路的数据传输速率为 100 Mbps，分组大小为 1 000 B ，其中分组头大小为 20 B。若主机 H1 向主机 H2 发送一个大小为 980 000 B 的文件，则在不考虑分组拆装时间和传播延迟的情况下，从 H1 发送开始到 H2 接收完为止，需要的时间至少是多少？
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/9a967e1a4e83161f49ab625ce1162bae.png)
    
    > 980 000 B 大小的文件需要分 1000 个分组，每个分组 1 000 B。
    > 
    > H1 发送整个文件需要的传输延迟为：`(980 000+20*1000)*8/100 000 000=80ms；`
    > 
    > 根据路由选择基本原理，所有数据分组应该经过两个路由器的转发，所以再加上最后一个分组的两次转发的传输延迟，即 `2*1000*8/100 000 000=0.16ms`。所以 H2 收完整个文件至少需要 80+0.16=80.16ms。
    
4.  假定主机 A 要向主机 B 发送一个大文件。从主机 A 到主机 B 的路径上有 3 段链路，其速率分别为 R1 = 500kbps, R2 = 2Mbps, R3 = 1 Mbps.
    
    a. 假定该网络中没有其他流量，该文件传送的吞吐量是多少
    
    b. 假定该文件为 4MB。用吞吐量除以文件长度，将该文件传输到主机 B 大致需要多长时间？
    
    > 注意：**吞吐量是最小的传输速率 min{Rs ,Rc}**
    > 
    > (4 X 8 X 106)/(500x103)
    
5.  假定两台主机 A 和 B 相隔 20000km, 由一条直接的 R= 2Mbps 的链路相连。假定跨越该链路的传播速率是 2.5 x l08m/s.
    
    a. 计算带宽 - 时延积 R . t p r o p R.t_{prop} R.tprop​.
    
    b. 考虑从主机 A 到主机 B 发送一个 800 000 比特的文件。假定该文件作为一个大的报文连续发送。在任何给定的时间，在链路上具有的比特数量最大值是多少?
    
    c. 给出带宽 - 时延积的一种解释。
    
    d. 在该链路上一个比特的宽度（以米计）是多少？它比一个足球场更长吗？
    
    e. 用传播速率 s、带宽 R 和链路 m 的长度表示，推导出一个比特宽度的一般表示式 s / R s/R s/R
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/140f6cf6de1f88d4e8deb6797bb0e6bc.png)
    
6.  考虑从主机 A 到主机 B 发送一个 F 比特的大文件。A 和 B 之间有三段链路（和两台交换机），并且 该链路不拥塞（即没有排队时延）。主机 A 将该文件分为每个为 S 比特的报文段，并为每个报文段 增加一个 80 比特的首部，形成 L= 80+S 比特的分组。每条链路的传输速率为 Rbps。求出从 A 到 B 移动该文件时延最小的值 S。忽略传播时延。
    
    > 时延 t=(2+F/S)(80+S)/R，对 t 求导 = 0，求出 S
    

往返时间的计算
-------

1.  如果客户机请求一个 html 页面，再该页面包括了 7 个 gif 图片的引用，且所有对象都在一台服务器上。
    
    *   当采用非持续连接时，客户机需要与 web 服务器建立多少个 TCP 连接？
    *   使用非流水线的持久 HTTP 连接使用的 TCP 连接数为多少？总共需要几个 RTT 才能完成整个网页的获取？
    *   在持久的带流水线 HTTP 连接中，客户端最少需要使用多少个 RTT 才能完成整个网页的获取？
    
    > 8，1，2+7=9，3
    
2.  假定你在浏览器中点击一条超链接获得 Web 页面。相关联的 URL 的 IP 地址没有缓存在本地主机上, 因此必须使用 DNS lookup 以获得该 IP 地址。如果主机从 DNS 得到 IP 地址之前已经访问了 n 个 DNS 服务器；相继产生的 RTT 依次为 RTT1、…、RTTn。令 RTT0 表示本地主机和包含对象的服务器之间的 RTT 值。假定该对象传输时间为零。
    
    *   如果与链路相关的 Web 页面只包含一个对象，即由少量的 HTML 文本组成。则从该客户点击该超链接到它接收到该对象需要多长时间？
    *   如果该 HTML 文件引用了 8 个非常小的对象。忽略发送时间，在下列情况下需要多长时间？
        *   没有并行 TCP 连接的非持续 HTTP
        *   配置有 5 个并行连接的非持续 HTTP
        *   带流水线的持久 HTTP 连接
        *   不带流水线的持久 HTTP 连接
    
    > 1.  RTT1+…+RTTn+ 2RTT0
    > 2.  RTT1+…+RTTn+ 2RTT0+2*8RTT0=RTT1+…+RTTn+ 18RTT0
    > 3.  RTT1+…+RTTn+ 2RTT0+2*2RTT0=RTT1+…+RTTn+ 6RTT0
    > 4.  流水 ：RTT1+…+RTTn+ 2RTT0+RTT0=RTT1+…+RTTn+ 3RTT0
    > 5.  非流水：RTT1+…+RTTn+ 2RTT0+8RTT0=RTT1+…+RTTn+ 10RTT0
    
3.  考虑下图，其中有一个机构的网络和因特网相连。假定对象的平均长度为 850 000bits，从这个机构网的浏览器到初始服务器的平均请求率是每秒 16 个请求。还假定从接入链路的因特网一侧的路由器转发一个 HTTP 请求开始，到接收到其响应的平均时间是 3 秒。将总的平均响应时间建模为平均接人时延（即从因特网路由器到机构路由器的时延）和平均因特网时延之和。对于平均接入时延，使用△/（1-△B），式中△是跨越接入链路发送一个对象的平均时间，B 是对象对该接入链路的平均到达率。
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/81f56a87d5bfb1d2fe4d2b11a9f84d8b.png)
    
    (1) 求出总的平均响应时间。
    
    (2) 现在假定在这个机构 LAN 中安装了一个缓存器。假定未命中率为 0.4, 求出总的响应时间。
    
    > (1) 平均接入时延 =△/（1-△B）=(850 000b/1.5 x 106)/[1-(850 000b/1.5 x 106x16]=0.6s
    > 
    > 总的平均响应时间 = 平均接入时延 + 平均因特网时延 = 0.6+3=3.6
    > 
    > (2) 平均接入时延 =△/（1- △x**0.4B**）=(850 000b/1.5 x 106)/[1-0.4x850 000b/1.5 x 106x16]
    > 
    > 总的平均响应时间 =(平均接入时延 + 平均因特网时延)x0.4=(3+0.089)x0.4=1.24s
    > 
    > **因为有缓冲，平均请求率也会相应下降**
    
4.  考虑一条 10 米短链路，某发送方经过它能够以 150bps 速率双向传输。假定包含数据分组是 100Kbits，仅包含控制（如 ACK 或握手）的分组是 200bits。假定 N 个并行连接每个都获 得 1/N 的链路带宽。现在考虑 HTTP 协议，并且假定每个下载对象是 100Kbits，这些初始下载对象包含 10 个来自相同发送方的引用对象。在这种情况下，经非持续 HTTP 的并行实例的并行下载有意义吗？现在考虑非流水线的持续 HTTP。你期待这比非持续的情况有很大增益吗？评价并解释你的答案。
    
    > 假设 Tp 表示客户端和服务器之间的单向传播延迟
    > 
    > （1）非持续 HTTP
    > 
    > `(200/150+Tp + 200/150 +Tp + 200/150+Tp + 100,000/150+ Tp ) + (200/(150/10)+Tp + 200/(150/10) +Tp + 200/(150/10)+Tp + 100,000/(150/10)+ Tp ) = 7377 + 8*Tp (seconds)`
    > 
    > （2）非流水线持续 HTTP
    > 
    > `(200/150+Tp + 200/150 +Tp + 200/150+Tp + 100,000/150+ Tp ) + 10*(200/150+Tp + 100,000/150+ Tp ) =7351 + 24*Tp (seconds)`
    > 
    > 假设传播速率为 300*106 m/sec, `Tp=10/(300*106)=0.03 ms`
    > 
    > 两者大致相同，说明使用持续连接的 HTTP 并不比使用非持续的并行 HTTP 快。
    
5.  1 条线路带宽为 1Mbps，往返时延为 45ms，假设数据分组的大小为 1000 字节。若采用停等协议方式，假设接受方收到一个数据分组后，立即确认，并且忽略确认分组的传输时延。简单分析实际的数据传输率是多少？
    
    > 题目中，分组的长度 n 为 n=1000*8bit=8000bit，则分组的传输时延为 n/1Mbps=8000b/1Mbps=8ms  
    > 分组从发送到收到确认的时间 t 为 t = 往返时间 + 发送时间 = 45ms+8ms=53ms  
    > 即平均 53ms 传送 1000 字节的数据，则数据的传输率 = n/t=151Kbps
    

域名系统 DNS
--------

1.  假设用一个全新的浏览器（第一次启动的那种），访问百度（http://www.baidu.com/），在敲入网址并按下回车之后，发生的事件？
    
    > 1、获得 IP 地址（1）首先搜索浏览器的 DNS 缓存，缓存中维护一张域名与 IP 地址的对应表（2）若没有命中，则继续搜索操作系统的 DNS 缓存（Linux,/etc/hosts; Windows, C:\WINDOWS\system32\drivers\etc\hosts）（3）若仍然没有命中，则操作系统将域名发送至本地域名服务器，本地域名服务器采用递归查询自己的 DNS 缓存，查找成功则返回结果（4）若本地域名服务器的 DNS 缓存没有命中，则本地域名服务器向上级域名服务器进行迭代查询 本地域名服务器向根域名服务器发起请求，根域名服务器返回顶级域名服务器地址给本地服务器 本地域名服务器拿到顶级域名服务器地址后，向其发起请求，获取权威域名服务器地址 本地域名服务器根据权威域名服务器地址，向其发起请求，得到该域名对应的 IP 地址 本地域名服务器将得到的 IP 地址返回给操作系统，同时自己将 IP 地址缓存起来（5）操作系统将 IP 地址返回给浏览器，同时自己也将 IP 地址缓存。浏览器得到域名对应的 IP 地址，并将 IP 地址缓存（缓存时间）。
    > 
    > 2、和起始服务器（或者 Web 缓存 / 代理服务器），建立 TCP 连接 得到百度的 IP，下一步是使用 TCP 协议，建立 TCP 连接。
    > 
    > 3、向起始服务器（或者 Web 缓存 / 代理服务器）发送请求报文，用 HTTP 协议请求网页内容，
    > 
    > 4、浏览器收到响应报文，并解析。
    
2.  网站主机名是 www.foo.com， 真实的规范主机名是 servereast.backup1.foo.com，IP 地址：112.147.11.30。邮件主机名 mail.foo.com, 真实的规范主机名 servereast.backup2.foo.com，IP 地址：112.147.11.40。在权威服务器中需要的 RR？
    
    > (www.network.com, servereast.backup1.foo.com, CNAME）(servereast.backup1.foo.com ,12.147.11.30, A ）(mail.network.com, servereast.backup2.foo.com, MX ）(servereast.backup2.foo.com, 112.147.11.40, A)
    
3.  Bob (client) 请求视频：http://netcinema.com/6Y7B23V，视频存储在 CDN 上，地址为 http://KingCDN.com/NetC6y&B23V
    
    > 1.  Bob 从 netcinema.com 的网页得到视频的 URL http://netcinema.com/6Y7B23V
    > 2.  通过 Bob 的本地 DNS 解析 http://netcinema.com/6Y7B23V
    > 3.  netcinema 的 DNS 返回 URL： http://KingCDN.com/NetC6y&B23V
    > 4.  由 KingCDN 的权威 DNS 解析 http://KingCDN.com/NetC6y&B23，其返回包含了视频的服务器的 IP
    > 5.  通过 HTTP，以流的方式从 KINGCDN 服务器取得视频
    

TCP 传输原理
--------

1.  假设主机 A 通过一条 TCP 连接向主机 B 发送两个紧接着的 TCP 报文段 ° 第一个报文段的序号为 90, 第二个报文段序号为 110
    
    a. 第一个报文段中有多少数据?
    
    b. 假设第一个报文段丢失而第二个报文段到达主机 B。那么在主机 B 发往主机 A 的确认报文中, 确认号应该是多少？
    
    > a) 20 bytes b) ack number = 90
    
2.  考虑一个 GBN 协议，其发送方窗口为 4, 序号范围为 1024。假设在 t 时刻接收方期待的下一个有序分组的序号是 k，且媒体不会对报文重新排序。回答以下问题：
    
    a. 在 t 时刻，发送方窗口内的报文序号可能是多少？论证你的回答。
    
    b. 在 t 时刻，在当前传播回发送方的所有可能报文中，ACK 字段的所有可能值是多少？论证你的回答。
    
    > [k-4，k+3]，[k-4，k-1]
    
3.  主机 A 和 B 经一条 TCP 连接通信，并且主机 B 已经收到了来自 A 的最长为 126 字节的所有字节。 假定主机 A 随后向主机 B 发送两个紧接着的报文段。第一个和第二个报文段分别包含了 80 字节和 40 字节的数据。在第一个报文段中，序号是 127, 源端口号是 302, 目的地端口号是 80。无论何时 主机 B 接收到来自主机 A 的报文段，它都会发送确认。
    
    a) 在从主机 A 发往 B 的第二个报文段中，序号、源端口号和目的端口号各是什么？
    
    b) 如果第一个报文段在第二个报文段之前到达，在第一个到达报文段的确认中，确认号、源端口号和目的端口号各是什么？
    
    c) 如果第二个报文段在第一个报文段之前到达，在第一个到达报文段的确认中，确认号是什么？
    
    d) 假定由 A 发送的两个报文段按序到达 B。第一个确认丢失了而第二个确认在第一个超时间隔之后 到达。画出时序图，显示这些报文段和发送的所有其他报文段和确认。（假设没有其他分组丢 失。）对于图上每个报文段，标出序号和数据的字节数量；对于你增加的每个应答，标出确认号。
    
    > a） 在从主机 A 到 B 的第二段中，序列号为 207，源端口号码是 302，目的地端口号是 80。b） 如果第一段在第二段之前到达，则在对第一段的确认中到达段，确认号为 207，源端口号为 80 并且目的地端口号是 302。c） 如果第二段在第一段之前到达，则在对第一个到达的段，确认号码是 127，表明它仍然是等待字节 127 及以后。
    > 
    > ![](https://i-blog.csdnimg.cn/blog_migrate/790927c1ea1794c94b7f2e9a8e5ff56a.png)
    
4.  sendbase:_TCP_ 状态变量 _SendBase_ 是最早未被确认的字节的序号。
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/818af16615baf10f0d4f2a30a8331978.png)  
    ![](https://i-blog.csdnimg.cn/blog_migrate/19c075ec625e9793d677f7f249a58bac.png)
    

TCP 拥塞控制
--------

1.  使用 TCP Reno 版本的 TCP 的拥塞控制 (包含了快速恢复部分)，我们假设其在轮次 1 的时候，由于检测到超时，刚进入慢启动阶段，此时 ssthresh=16。随着 TCP 一个轮次一个轮次的的运行，接收方经历了以下事件：  
    (1) 在轮次 11 和轮次 12 之间，轮次次 11 快要结束时，收到了 3 个冗余的 ack，因此在轮次 12 开始时，协议状态迁移到另一个状态。  
    (2) 在轮次 12 期间，又收到了 4 个冗余的 ack。  
    (3) 在轮次 13 和轮次 14 之间，轮次 13 快要结束时，收到了 1 个新的 ack，因此在轮次 14 开始时，进入到下一个状态。  
    (4) 在轮次 19 快要结束时，检测到超时，因此在轮次 20 开始时，系统迁移进入到下一个状态。  
    请根据接收方经历的事件，填写每个轮次开始时，拥塞窗口 cwnd 的值 (单位 MSS)。
    
    <table><thead><tr><th>轮次 n</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>11</th><th>12</th></tr></thead><tbody><tr><td>cwnd</td><td>1</td><td>2</td><td>4</td><td>8</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td><td>14</td></tr></tbody></table><table><thead><tr><th>轮次 n</th><th>13</th><th>14</th><th>15</th><th>16</th><th>17</th><th>18</th><th>19</th><th>20</th><th>21</th><th>22</th><th>23</th><th>24</th></tr></thead><tbody><tr><td>cwnd</td><td>18</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td><td>1</td><td>2</td><td>4</td><td>8</td><td>9</td></tr></tbody></table>
2.  假设 TCP Reno 是一个经历如上所示行为的协议，回答下列问题。在各种情况中，简要地论证你的回答。
    
    （1）指出 TCP 慢启动运行时的时间间隔。
    
    （2）指出 TCP 拥塞避免运行时的时间间隔。
    
    （3）在第 16 个传输轮回之后，报文段的丢失是根据 3 个冗余 ACK 还是根据超时检测岀来的？
    
    （4）在第 22 个传输轮回之后，报文段的丢失是根据 3 个冗余 ACK 还是根据超时检测出来的？
    
    （5）在第 1 个传输轮回里，ssthresh 的初始值设置为多少？
    
    （6）在第 18 个传输轮回里，ssthresh 的值设置为多少？
    
    （7）在第 24 个传输轮回里，ssthresh 的值设置为多少？
    
    （8）在哪个传输轮回内发送第 70 个报文段？
    
    （9）假定在第 26 个传输轮回后，通过收到 3 个冗余 ACK 检测出有分组丢失，拥塞的窗口长度和 ssthresh 的值应当是多少？
    
    （10）假定使用 TCP Tahoe （而不是 TCP Reno）, 并假定在第 16 个传输轮回收到 3 个冗余 ACK。在第 19 个传输轮回，ssthresh 和拥塞窗口长度是什么？
    
    （11）再次假设使用 TCP Tahoe, 在第 22 个传输轮回有一个超时事件。从第 17 个传输轮回到第 22 个传 输轮回（包括这两个传输轮回），一共发送了多少分组？
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/93fe09e71686fba818b5d7890ddea08f.png)
    
    > (1)[1,6] and [23,26]
    > 
    > (2)[6,16] （[17,22] 是快速恢复，可以理解为每一个 RTT 收到一个冗余 ACK）
    > 
    > (3) 重复 ACK[4) 超时 (5)32  
    > (6)21(在 16 轮回，CongWin = 42)
    > 
    > (7)14 (在 22 轮回, CongWin = 29)
    > 
    > (8）7 (64-96)(9) threshold=4，CongWin = 7 (10) threshold=21，CongWin =4(拥塞避免)
    > 
    > (11)52=1+2+4+8+16+21
    

子网划分
----

1.  某单位从 ISP 处购买了一个 IP 地址块 113.54.70.0/24。如果该单位有 3 个部门，第 1 个 部门 100 台计算机，第 2 个和第 3 个部门各有 60 台计算机，请你为 3 个部门划分子网，并给出 各部门的网络号、子网掩码和主机可分配的 IP 地址范围。
    
    > *   第一个部门：网络号 113.54.70.0，子网掩码 255.255.255.128，可分配主机 IP 地址范围 113.54.70.1 - 113.54.70.126
    > *   第二个部门：网络号 113.54.70.128，子网掩码 255.255.255.192，可分配主机 IP 地址范围 113.54.70.129 - 113.54.70.190
    > *   第三个部门：网络号 113.54.70.192，子网掩码 255.255.255.192，可分配主机 IP 地址范围 113.54.70.193 - 113.54.70.254
    
2.  考虑互联 3 个子网的一台路由器。假定在这 3 个子网的每个子网中的所有接口要求具有前缀 223.1.17/24。还假定子网 1 要求支持多达 60 个接口，子网 2 要求支持多达 90 个接口，子网 3 要求支持多达 12 个接口，提供 3 个满足这些限制的网络地址。（形式为 a.b.c.d/x）
    
    > 1.  子网 2：
    >     *   网络号：223.1.17.0
    >     *   子网掩码：255.255.255.128（/25）
    >     *   可分配的 IP 地址范围：223.1.17.1 - 223.1.17.126
    > 2.  子网 1：
    >     *   网络号：223.1.17.128
    >     *   子网掩码：255.255.255.192（/26）
    >     *   可分配的 IP 地址范围：223.1.17.129 - 223.1.17.190
    > 3.  子网 3：
    >     *   网络号：223.1.17.192
    >     *   子网掩码：255.255.255.240（/28）
    >     *   可分配的 IP 地址范围：223.1.17.193 - 223.1.17.206
    

链路状态选路算法
--------

1.  用 dijkstra 的最短路算法计算从 U 到所有网络节点的最短路径，完成链路状态选路算法表和路由器 U 的路由表的填写。
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/e394c7d5406f65ebc3c32a37addbfd58.png)
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/b91076511b53eb8300017431f9b26d4b.png)
    

差错检测技术
------

1.  假设通信双方协商的生成多项式 G = X 4 + X 2 + X + 1 G=X^4+X^2+X+1 G=X4+X2+X+1，发送方要发送的数据 D=11001100，问题:
    
    *   CRC 校验信息需要多少位?
    *   发送方最终发送的数据是多少位?
    *   发送方最终发送的数据内容是什么?
    *   如果传输过程中出现一位错误能否检测? 出现六位错误能否检测?
    
    > 4 位，12 位，11001100 0101，一位错误可检测到，六位错误大概率（不是 100%，概率为 1 - 0. 5^r ）可以检测到
    

ARP 协议，交换机
----------

1.  有如图所示的拓扑结构，主机 E 向主机 B 发送一个 IP 数据报，假设所有主机的 ARP 缓存表和交换机转发表都是最新的，则 E 发出的数据帧的目的 MAC 地址和目的 IP 地址分别是（）和（），源 MAC 地址和源 IP 地址分别是（）和（）；Router2 收到数据帧以后，将继续转发该数据帧，转发的数据帧的目的 MAC 地址和目的 IP 地址分别是（）和（），源 MAC 地址和源 IP 地址分别是（）和（）；Router1 收到该数据帧以后将继续转发该数据帧给主机 B，Router1 转发的数据帧的目的 MAC 地址和目的 IP 地址分别是（）和（），源 MAC 地址和源 IP 地址分别是（）和（）。
    
2.  假设主机 E 发送 IP 数据报给主机 F，主机 E 将请求路由器 Router2 帮助转发该数据报吗？（）（会 / 不会），这是因为（）。E 发出的数据帧的目的 MAC 地址是（）。
    
3.  假设主机 E 向主机 D 发送 IP 数据报，主机 E 的 ARP 缓存表中没有主机 D 的 MAC 地址，E 将执行 ARP 查询来发现 D 的 MAC 地址吗？（）（会 / 不会），这是因为（）。Router2 收到的数据帧的目的 MAC 地址是（）。
    
4.  主机 C 发送 IP 数据报给主机 D，C 的 ARP 缓存不包含 D 的 MAC 地址，D 的 ARP 缓存不包含 C 的 MAC 地址，进一步假设与 C、D 相连的交换机的转发表只包含 D 和路由器 R2 的表项，因此 C 将广播一个 ARP 请求报文。中间的交换机收到 C 的 ARP 请求报文，将执行的操作是（），这个请求报文会到达路由器 Router2 吗？（）（会 / 不会），Router2 会继续转发该报文到右边的交换机吗？（）（会 / 不会），这是因为（），主机 D 收到 ARP 请求报文后，会返回一个 ARP 响应报文给主机 C，它需要发送一个 ARP 请求报文来获得 C 的 MAC 地址吗？（）（需要 / 不需要），这是因为（），中间交换机收到 ARP 响应报文的数据帧后，将直接转发该数据帧给主机 C，这是因为（）。
    
    ![](https://i-blog.csdnimg.cn/blog_migrate/df47518f1c8fa614c5dd7fd1db4e758b.png)
    
    > **在数据包的转发过程中，源 IP 地址和目的 IP 地址始终保持不变；而源 MAC 地址和目的 MAC 地址逐段链路 (或逐个网络) 改变。**
    > 
    > 目的 MAC 地址: 88-88-88-88-88-88，目的 IP 地址: 192.168.1.003;
    > 
    > 源 MAC 地址: 77-77-77-77-77-77，源 IP 地址: 192.168.3.001;
    > 
    > 目的 MAC 地址: 33-33-33-33-33-33，目的 IP 地址: 192.168.1.003;
    > 
    > 源 MAC 地址: 55-55-55-55-55-55，源 IP 地址: 192.168.3.001;
    > 
    > 目的 MAC 地址: 11-11-11-11-11-11，目的 IP 地址: 192.168.1.003;
    > 
    > 源 MAC 地址: 22-22-22-22-22-2，源 IP 地址: 192.168.3.001;
    > 
    > 不会
    > 
    > 主机 E 和主机 F 在同一个局域网内，主机 E 可以直接将数据帧发送到局域网中，然后由局域网中的交换机或集线器将数据帧转发给主机 F
    > 
    > 99-99-99-99-99-99
    > 
    > 不会
    > 
    > 主机 E 和主机 D 不在同一个局域网内，它们之间的通信需要经过路由器。主机 E 会将数据报发送给它的默认网关，即连接到它所在局域网的路由器，然后由路由器根据路由表将数据报转发到目标网络
    > 
    > 88-88-88-88-88-88
    > 
    > 广播操作，即将该数据帧转发给除了到达端口之外的所有端口
    > 
    > 会；不会
    > 
    > ARP 协议只在单个局域网内有效
    > 
    > 不需要
    > 
    > D 已经根据来自 C 的 ARP 请求报文的数据帧的源 MAC 地址知道了 C 的 MAC 地址
    > 
    > 交换机已经在收到 C 的 ARP 请求报文的数据帧时，通过自学习 "学习" 到主机 C 的 MAC 地址对应的到达端口